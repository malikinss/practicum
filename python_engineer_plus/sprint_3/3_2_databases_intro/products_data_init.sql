-- drop all tables and recreate them
DROP TABLE IF EXISTS products;
DROP TABLE IF EXISTS products_stores;
DROP TABLE IF EXISTS products_data_all;
DROP TABLE IF EXISTS transactions;
DROP TABLE IF EXISTS stores;

-- create tables
-- Create the products table
CREATE TABLE products (
    id_product INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    category TEXT NOT NULL,
    units TEXT NOT NULL,
    weight TEXT
);

-- Create the products_stores table
CREATE TABLE products_stores (
    id_product INTEGER NOT NULL,
    price INTEGER NOT NULL,
    id_store INTEGER NOT NULL,
    date_upd DATETIME NOT NULL,
    PRIMARY KEY (id_product, id_store, date_upd)
);

-- Create the transactions table
CREATE TABLE transactions (
    user_id INTEGER NOT NULL,
    id_transaction INTEGER NOT NULL,
    id_store INTEGER NOT NULL,
    id_product INTEGER NOT NULL,
    date DATETIME NOT NULL,
    unique_id INTEGER NOT NULL,
    PRIMARY KEY (unique_id)
);

-- Create the products_data_all table
CREATE TABLE products_data_all (
    id_product INTEGER NOT NULL,
    name VARCHAR(255) NOT NULL,
    category VARCHAR(100) NOT NULL,
    units VARCHAR(10) NOT NULL,
    weight DECIMAL(10,3),
    price DECIMAL(10,2) NOT NULL,
    date_upd DATETIME NOT NULL,
    id_store INTEGER NOT NULL,
    name_store VARCHAR(100) NOT NULL,
    PRIMARY KEY (id_product, id_store)
);

-- Create the stores table
CREATE TABLE stores (
    id_store INTEGER PRIMARY KEY,
    name_store TEXT NOT NULL
);

-- insert data into tables

--insert data into products table
INSERT INTO products (id_product, name, category, units, weight) VALUES
(0, 'Молоко топленое Эконива 4%, 1 л', 'молоко и сливки', 'л', '1'),
(1, 'Молоко пастеризованное Му-му отборное 3,4-6,0%, 900 г', 'молоко и сливки', 'г', '900'),
(2, 'Молоко пастеризованное Фермерский супермаркет Сферм 3,2-4%, 930 мл', 'молоко и сливки', 'мл', '930'),
(3, 'Молоко цельное пастеризованное Ваша Ферма 3,4-6,0%, 1 л', 'молоко и сливки', 'л', '1'),
(4, 'Молоко цельное Асеньевская ферма 3,4-6%, 900 мл', 'молоко и сливки', 'мл', '900'),
(6, 'Молоко козье пастеризованное Му-му Вита 2,8-5,6%, 500 мл', 'молоко и сливки', 'мл', '500'),
(50, 'Молоко пастеризованное Углече Поле органическое отборное 3,5-5,2%, 1 л', 'молоко и сливки', 'л', '1'),
(51, 'Молоко пастеризованное Правильное 3,2-4%, 900 мл', 'молоко и сливки', 'мл', '900'),
(52, 'Молоко цельное пастеризованное Му 3,6-5,5%, 1,25 л', 'молоко и сливки', 'л', '1.25'),
(53, 'Молоко пастеризованное питьевое Му-му цельное 3,0-6,0%, 930 мл', 'молоко и сливки', 'мл', '930'),
(55, 'Молоко цельное Эконива 3,3-6%, 1 л', 'молоко и сливки', 'л', '1'),
(100, 'Молоко пастеризованное Можайская Буренка 3,2%, 1 л', 'молоко и сливки', 'л', '1'),
(102, 'Молоко пастеризованное Вологжанка 3,2%, 1 л', 'молоко и сливки', 'л', '1'),
(103, 'Молоко пастеризованное Правильное 1,5%, 2 л', 'молоко и сливки', 'л', '2'),
(104, 'Молоко пастеризованное Авида с крышечкой 3,2%, 1 л', 'молоко и сливки', 'л', '1'),
(105, 'Молоко ультрапастеризованное Авида 3,2%, 1 л', 'молоко и сливки', 'л', '1'),
(106, 'Молоко пастеризованное Экомилк 3,2%, 1,5 л', 'молоко и сливки', 'л', '1.5'),
(147, 'Масло сладко-сливочное Крестьянское Umalatte 72,5 %, 500 г', 'масло сливочное и маргарин', 'г', '500'),
(148, 'Масло сливочное Волоколамское традиционное высший сорт 82,5%, 200 г', 'масло сливочное и маргарин', 'г', '200'),
(154, 'Масло сливочное Arla Natura 82 %, 400 г', 'масло сливочное и маргарин', 'г', '400'),
(7, 'Молоко ультрапастеризованное М Лианозовское 3,2%, 950 г', 'молоко и сливки', 'г', '950');

-- insert data into products_stores table
INSERT INTO products_stores (id_product, price, id_store, date_upd) VALUES
(3, 69, 0, '2019-06-01 00:00:00'),
(5, 78, 0, '2019-06-01 00:00:00'),
(8, 76, 0, '2019-06-01 00:00:00'),
(10, 84, 0, '2019-06-01 00:00:00'),
(11, 99, 0, '2019-06-01 00:00:00'),
(12, 23, 0, '2019-06-01 00:00:00'),
(16, 24, 0, '2019-06-01 00:00:00'),
(17, 139, 0, '2019-06-01 00:00:00'),
(18, 129, 0, '2019-06-01 00:00:00'),
(20, 54, 0, '2019-06-01 00:00:00'),
(21, 92, 0, '2019-06-01 00:00:00'),
(25, 29, 0, '2019-06-01 00:00:00'),
(26, 99, 0, '2019-06-01 00:00:00'),
(27, 84, 0, '2019-06-01 00:00:00'),
(28, 89, 0, '2019-06-01 00:00:00'),
(29, 99, 0, '2019-06-01 00:00:00'),
(31, 72, 0, '2019-06-01 00:00:00'),
(34, 69, 0, '2019-06-01 00:00:00'),
(35, 88, 0, '2019-06-01 00:00:00'),
(38, 75, 0, '2019-06-01 00:00:00'),
(39, 64, 0, '2019-06-01 00:00:00');


-- insert data into transactions table
INSERT INTO transactions (user_id, id_transaction, id_store, id_product, date, unique_id) VALUES
(326, 25815, 2, 144, '2019-06-14 16:27:30', 0),
(326, 25815, 2, 117, '2019-06-14 16:27:30', 1),
(326, 25815, 2, 105, '2019-06-14 16:27:30', 2),
(326, 25815, 2, 111, '2019-06-14 16:27:30', 3),
(326, 25815, 2, 138, '2019-06-14 16:27:30', 4),
(542, 25816, 3, 74, '2019-06-10 14:16:10', 5),
(542, 25816, 3, 96, '2019-06-10 14:16:10', 6),
(542, 25816, 3, 4, '2019-06-10 14:16:10', 7),
(525, 25817, 2, 27, '2019-06-26 14:11:09', 8),
(525, 25817, 2, 47, '2019-06-26 14:11:09', 9),
(525, 25817, 2, 172, '2019-06-26 14:11:09', 10),
(609, 25818, 4, 74, '2019-06-04 13:00:43', 11),
(609, 25818, 4, 60, '2019-06-04 13:00:43', 12),
(609, 25818, 4, 101, '2019-06-04 13:00:43', 13),
(609, 25818, 4, 177, '2019-06-04 13:00:43', 14),
(609, 25818, 4, 165, '2019-06-04 13:00:43', 15),
(763, 25819, 0, 126, '2019-06-23 19:04:30', 16),
(987, 25820, 2, 61, '2019-06-21 09:44:45', 17),
(987, 25820, 2, 124, '2019-06-21 09:44:45', 18),
(640, 25821, 2, 54, '2019-06-04 18:32:24', 19);

-- insert data into products_data_all table
INSERT INTO products_data_all (id_product, name, category, units, weight, price, date_upd, id_store, name_store) VALUES
(3, 'Молоко цельное пастеризованное Ваша Ферма 3,4-6,0%, 1 л', 'молоко и сливки', 'л', 1.000, 69.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(5, 'Молоко пастеризованное Искренне Ваш отборное 3,4-6,0%, 900 мл', 'молоко и сливки', 'мл', NULL, 78.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(8, 'Молоко стерилизованное Можайское 3,2%, 450 мл', 'молоко и сливки', 'мл', 450.000, 76.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(10, 'Молоко ультрапастеризованное Простоквашино 2,5%, 950 мл', 'молоко и сливки', 'мл', 950.000, 84.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(11, 'Молоко ультрапастеризованное Домик в деревне 0,5%, 950 г', 'молоко и сливки', 'г', 950.000, 99.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(12, 'Молоко ультрапастеризованное Вкуснотеево 2,5%, 200 г', 'молоко и сливки', 'г', 200.000, 23.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(16, 'Молоко ультрапастеризованное Parmalat 1,8%, 200 г', 'молоко и сливки', 'г', 200.000, 24.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(17, 'Молоко пастеризованное Домик в деревне отборное 3,5-4,5%, 1,4 л', 'молоко и сливки', 'л', 1.400, 139.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(18, 'Молоко пастеризованное Домик в деревне 2,5%, 1,4 л', 'молоко и сливки', 'л', 1.76, 129.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(20, 'Молоко ультрапастеризованное Авида 1,5%, 1 л', 'молоко и сливки', 'л', 1.000, 54.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(21, 'Молоко цельное Деревенская жизнь Айширское 2,5-4,5%, 0,95 л', 'молоко и сливки', 'л', 0.950, 92.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(25, 'Молоко ультрапастеризованное Parmalat Low Lactose низколактозное 1,8%, 200 мл', 'молоко и сливки', 'мл', 200.000, 29.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(26, 'Молоко ультрапастеризованное Parmalat Low Lactose низколактозное 3,5%, 1 л', 'молоко и сливки', 'л', 1.000, 99.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(27, 'Молоко низколактозное Parmalat Low Lactose 0,05%, 1 л', 'молоко и сливки', 'л', NULL, 84.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(28, 'Молоко топленое стерилизованное Можайское 6%, 0,45 л', 'молоко и сливки', 'л', 0.450, 89.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(29, 'Молоко топленое пастеризованное Домик в деревне 3,2%, 925 мл', 'молоко и сливки', 'мл', 925.000, 99.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(31, 'Молоко топленое Рузское 2,5%, 500 г', 'молоко и сливки', 'г', 500.000, 72.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(34, 'Молоко топленое Вологодское лето 4%, 930 мл', 'молоко и сливки', 'мл', 930.000, 69.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(35, 'Молоко топленое Ваша Ферма, 0,5 л', 'молоко и сливки', 'л', 0.500, 88.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности'),
(38, 'Молоко пастеризованное Простоквашино отборное 3,4-4,5%, 930 мл', 'молоко и сливки', 'мл', 930.000, 75.00, '2019-06-01 00:00:00', 0, 'Молочные вкусности');


-- insert data into stores table
INSERT INTO stores (id_store, name_store) VALUES
(0, "Молочные вкусности"),
(1, "Семёрочка"),
(2, "ВкусМилк"),
(3, "Простоквашкино"),
(4, "Lentro");